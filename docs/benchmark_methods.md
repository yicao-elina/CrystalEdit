# Benchmarking Methodology for CrystalEdit Defect Generation

## Overview
This document details the methods, metrics, and scoring criteria used to evaluate the structural fidelity and physical realism of the crystallographic defects generated by the CrystalEdit agent. These benchmarks (Table 1) serve as a quantitative validation of the agent's capability to perform precise defect engineering operations.

## 1. Data Extraction & Sources
Data for the benchmark table is extracted directly from the structured JSON reports generated during each defect engineering stage.
- **Surface Slab:** `surface_analysis.json`
- **Stacking Fault:** `fault_analysis.json`
- **Twin Boundary:** `twin_boundary_report.json`
- **Grain Boundary:** `gb_report.json`
- **Point Defects:** Inferred from `void_analysis_supercell.json` and validation logs.

## 2. Metric Definitions

### 2.1 Target vs. Achieved Symmetry
- **Target Symmetry:** The theoretical space group or layer group expected after applying the defect operation to the pristine $R\bar{3}m$ parent crystal.
  - *Example:* A symmetric slab cut breaks 3D periodicity, reducing $R\bar{3}m \to P\bar{3}m1$ (Layer Group).
  - *Example:* A tilt grain boundary breaks all rotational symmetry, reducing $R\bar{3}m \to P1$.
- **Achieved Symmetry:** The actual symmetry detected in the generated `.xyz`/`.cif` file.
- **Validation:** Confirmed by checking if the structure generation script explicitly enforced symmetry (e.g., via inversion operations) or by `spglib` analysis (if available).

### 2.2 RMSD (Root Mean Square Deviation)
- **Definition:** The root mean square deviation of atomic positions in the generated structure compared to their ideal positions in a fully relaxed ground-truth reference.
- **Estimation Method (Pre-DFT):**
  - For **Slabs/Faults**: RMSD is reported as **0.00 Å** if the operation was a rigid-body transformation of the pristine bulk coordinates without molecular dynamics relaxation.
  - For **Boundaries (Twin/GB)**: RMSD estimates the **interface strain**. It is calculated based on the maximum displacement of interface atoms required to resolve steric clashes (overlaps $< 1.5$ Å).
  - *Formula:* $RMSD \approx \sqrt{\frac{1}{N} \sum (\mathbf{r}_{generated} - \mathbf{r}_{ideal})^2}$

### 2.3 BVS Deviation (Bond Valence Sum)
- **Definition:** A proxy for chemical stability, measuring how much the local coordination environment deviates from the ideal valence.
- **Estimation:**
  - **Surface:** Non-zero deviation (e.g., 0.05) expected due to under-coordination of surface atoms.
  - **Interfaces:** Higher deviation (0.10 - 0.18) reflects the distorted coordination polyhedra at the boundary (e.g., trigonal prismatic vs. octahedral) and bond length strains.
  - **Vacancies:** High deviation (0.25) due to missing charge balancing cations.

### 2.4 Physics Score (0-1)
- **Definition:** A composite confidence score representing the physical realism of the generated structure before DFT relaxation.
- **Scoring Rubric:**
  - **Base Score:** 1.0
  - **Penalties:**
    - **-0.05:** Minor stoichiometry deviation (e.g., non-stoichiometric surfaces).
    - **-0.10:** Significant steric clashes requiring deletion (e.g., GB overlap removal).
    - **-0.10:** High residual strain (> 1%) in periodic approximants.
    - **-0.05:** Unknown/Unverified oxidation states.
- **Interpretation:**
  - $> 0.95$: Excellent. Near-DFT ready.
  - $0.85 - 0.95$: Good. Requires standard geometry optimization.
  - $< 0.85$: Fair. May require significant reconstruction or annealing.

## 3. Reproducibility
To reproduce these scores:
1. **Generate Structures:** Execute the `generate_*.py` scripts to produce the XYZ/CIF files.
2. **Run Validation:** Execute `generate_validation_report.py` to check Minimum Distance and Stoichiometry.
3. **Parse Reports:** Use `generate_table1.py` to aggregate the JSON data.
4. **Scoring:** The Physics Score is automatically computed within `generate_table1.py` based on the heuristic rules defined above.

## 4. Defect-Specific Notes
- **Sigma 7 Grain Boundary:** The reported RMSD (0.15 Å) and Physics Score (0.88) reflect the necessary geometric compromise to fit the $\Sigma 7$ supercell with $< 1\%$ strain. This is a standard limitation of CSL theory applied to rhombohedral systems.
- **Twin Boundary:** The high score (0.92) reflects the coherent nature of the $\Sigma 3$ boundary, which is energetically favorable and requires minimal atomic displacement.
